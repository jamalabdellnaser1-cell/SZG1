<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SZG</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta name="description" content="ŸÖŸàŸÇÿπ ÿ™ÿπŸÑŸäŸÖŸä ŸÑÿ¥ÿ±ÿ≠ ÿßŸÑÿ®ÿ±ŸÖÿ¨ÿ© ÿ®ÿ∑ÿ±ŸäŸÇÿ© ÿ≥ŸáŸÑÿ© Ÿàÿ®ÿ≥Ÿäÿ∑ÿ©">
    <meta name="keywords" content="ŸÖŸàŸÇÿπ SZG">
    <meta name="author" content="SZG">
    <meta name="robots" content="index, follow">

  <link rel="icon" href="./logo.png">

  <!-- CodeMirror -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/theme/dracula.min.css">

  <style>
    *{box-sizing:border-box;margin:0;padding:0}

    body{
      height:100vh;
      display:flex;
      flex-direction:column;
      font-family:Arial,Helvetica,sans-serif;
      background:black url(./background.svg);
      color:#e5e7eb;
    }

    /* ===== HEADER ===== */
    .constant{
      position:sticky;
      top:0;
      z-index:999;
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:15px 20px;
      background:rgba(0,0,0,.9);
      box-shadow:0 0 10px #4da3ff;
      border-radius:10px;
    }

    .pic img{max-width:140px}

    .text{
      display:flex;
      gap:15px;
    }

    .text a{
      color:#4da3ff;
      text-decoration:none;
      font-size:16px;
    }

    /* ===== LAYOUT ===== */
    .container{
      flex:1;
      display:grid;
      grid-template-columns:1fr 1fr;
      overflow:hidden;
    }

    .editor{
      display:flex;
      flex-direction:column;
      background:#020617;
      border-right:1px solid #1e293b;
    }

    .editor-header{
      padding:10px 14px;
      font-size:13px;
      color:#94a3b8;
      background:#000;
      border-bottom:1px solid #1e293b;
    }

    .CodeMirror{
      flex:1;
      font-size:14px;
    }

    /* ===== RUN BAR ===== */
    .run-bar{
      padding:10px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      background:#020617;
      border-top:1px solid #1e293b;
    }

    #status{
      font-size:13px;
      color:#22c55e;
    }

    .actions{
      display:flex;
      gap:10px;
    }

    .run-bar button{
      padding:8px 18px;
      border-radius:14px;
      font-size:14px;
      border:none;
      cursor:pointer;
      font-weight:bold;
      color:#022c22;
    }

    #runBtn{
      background:linear-gradient(135deg,#22c55e,#16a34a);
    }

    #clearOutput{
      background:linear-gradient(135deg,#38bdf8,#0284c7);
      color:#022c22;
    }

    #clearCode{
      background:linear-gradient(135deg,#f87171,#dc2626);
      color:white;
    }

    /* ===== OUTPUT ===== */
    .output{
      background:#020617;
      padding:14px;
      overflow-y:auto;
      font-family:Consolas,monospace;
      white-space:pre-wrap;
    }

    .output::before{
      content:"Console Output";
      display:block;
      margin-bottom:10px;
      font-size:12px;
      color:#94a3b8;
      border-bottom:1px dashed #1e293b;
      padding-bottom:6px;
    }

    /* ===== MOBILE ===== */
    @media(max-width:900px){
      .container{
        grid-template-columns:1fr;
        grid-template-rows:1fr 1fr;
      }
      .editor{
        border-right:none;
        border-bottom:1px solid #1e293b;
      }
    }
  </style>
</head>

<body>

<header class="constant">
  <div class="pic">
    <img src="./logo.png">
  </div>
  <div class="text">
    <a href="index.html">Home</a>
    <a href="A.HTML">Chapters</a>
    <a href="#">Editor</a>
  </div>
</header>

<div class="container">

  <div class="editor">
    <div class="editor-header">JavaScript Sandbox Editor</div>

    <textarea id="code">
    </textarea>

    <div class="run-bar">
      <div id="status">‚óè Ready</div>
      <div class="actions">
        <button id="runBtn">‚ñ∂ Run</button>
        <button id="clearOutput">üßπ Output</button>
        <button id="clearCode">üóë Code</button>
      </div>
    </div>
  </div>

  <div class="output" id="output"></div>

</div>

<!-- CodeMirror JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/mode/javascript/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/addon/edit/closebrackets.min.js"></script>

<script>
  const STORAGE_KEY = "SZG_SANDBOX_CODE";

  const editor = CodeMirror.fromTextArea(
    document.getElementById("code"),
    {
      mode:"javascript",
      theme:"dracula",
      lineNumbers:true,
      autoCloseBrackets:true,
      tabSize:2
    }
  );

  const output = document.getElementById("output");
  const status = document.getElementById("status");

  let worker;
  let saveTimer;

  /* ===== Load Saved Code ===== */
  const saved = localStorage.getItem(STORAGE_KEY);
  if(saved){
    editor.setValue(saved);
    status.textContent = "‚úî Restored";
  }

  /* ===== Auto Save ===== */
  editor.on("change", ()=>{
    status.textContent = "‚óè Editing...";
    clearTimeout(saveTimer);
    saveTimer = setTimeout(()=>{
      localStorage.setItem(STORAGE_KEY, editor.getValue());
      status.textContent = "‚úî Saved";
    },500);
  });

  /* ===== Run Code (Sandbox) ===== */
  function runCode(){
    output.textContent = "";
    if(worker) worker.terminate();

    const userCode = editor.getValue();

    const workerScript = `
      self.console = {
        log:(...a)=>self.postMessage({t:'log',d:a.join(' ')}),
        error:(...a)=>self.postMessage({t:'err',d:a.join(' ')})
      };
      try{
        ${userCode}
      }catch(e){
        self.postMessage({t:'err',d:e.message});
      }
    `;

    const blob = new Blob([workerScript],{type:"application/javascript"});
    worker = new Worker(URL.createObjectURL(blob));

    worker.onmessage = e=>{
      if(e.data.t==="log") output.textContent+=e.data.d+"\\n";
      if(e.data.t==="err") output.textContent+="‚ùå "+e.data.d+"\\n";
    };

    setTimeout(()=>{
      if(worker){
        worker.terminate();
        output.textContent+="\\n‚õî Execution stopped (timeout)";
      }
    },2000);
  }

  /* ===== Buttons ===== */
  document.getElementById("runBtn").onclick = runCode;

  document.getElementById("clearOutput").onclick = ()=>{
    output.textContent="";
  };

  document.getElementById("clearCode").onclick = ()=>{
    if(confirm("Clear all code?")){
      editor.setValue("");
      localStorage.removeItem(STORAGE_KEY);
      status.textContent="üóë Cleared";
    }
  };

  /* ===== Shortcuts ===== */
  editor.addKeyMap({
    "Ctrl-Enter": runCode,
    "Cmd-Enter": runCode,
    "Ctrl-S": ()=>{
      localStorage.setItem(STORAGE_KEY, editor.getValue());
      status.textContent="‚úî Saved";
      return false;
    }
  });
</script>

</body>
</html>
